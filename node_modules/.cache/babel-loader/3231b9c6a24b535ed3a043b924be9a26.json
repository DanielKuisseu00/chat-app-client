{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _asyncToGenerator from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import _regeneratorRuntime from\"C:\\\\Users\\\\hillj\\\\Desktop\\\\dev\\\\react\\\\chaty\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import styled from\"styled-components\";import{Link}from\"react-router-dom\";import Logo from\"../assets/chaty-logos_white.png\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{axiosInstance}from\"../util/axios/axiosInstance\";import{loginRoute}from\"../util/axios/routes\";import{useDispatch,useSelector}from\"react-redux\";import{addUser,removeUser}from\"../redux/userSlice\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(){// Defining vairables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var user=useSelector(function(state){return state.user.value;});var dispatch=useDispatch();var navigate=useNavigate();console.log(user);// configuring Toast options for modal\nvar toastOptions={position:\"top-center\",autoClose:\"800ms\",pauseOnHover:true,draggable:true,theme:\"dark\"};// If user is already logged in and saved into local stoarge code will send them to chat room.\n// useEffect(() => {\n//   if (user.username) {\n//     navigate(\"/\");\n//   }\n// }, []);\n// Makes request to api and saves recived user object to redux\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axiosInstance$,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!handleValidation){_context.next=15;break;}_context.prev=2;_context.next=5;return axiosInstance.post(loginRoute,{username:username,password:password});case 5:_yield$axiosInstance$=_context.sent;data=_yield$axiosInstance$.data;dispatch(removeUser());dispatch(addUser(data));navigate(\"/chat\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);toast.error(\"Opps? somthing went wrong\",toastOptions);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// Code validates user form input\nvar handleValidation=function handleValidation(){if(username.length<3||password.length<3){toast.error(\"Email and password required\",toastOptions);return false;}else{return true;}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(Image,{src:Logo}),/*#__PURE__*/_jsx(Name,{children:\"Chatty\"})]}),/*#__PURE__*/_jsxs(InputContainer,{children:[/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"username\",placeholder:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",placeholder:\" password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsxs(Span,{children:[\"I don't have an account yet\",\" \",/*#__PURE__*/_jsx(Link,{style:{color:\"blue\",textDecoration:\"none\"},to:\"/register\",children:\"Register\"})]})]})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 100vw;\\n  height: 100vh;\\n  background: #131224;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));var Form=styled.form(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 30%;\\n  display: flex;\\n  height: 500px;\\n  flex-direction: column;\\n  border-radius: 10px;\\n  background: #0b0914;\\n\"])));var Top=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));var Image=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 100px;\\n\"])));var Name=styled.h2(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  color: white;\\n  font-size: 30px;\\n\"])));var InputContainer=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  max-width: 100%;\\n  flex: 3;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 20px 40px;\\n\"])));var Input=styled.input(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  border: 2px solid #3e1c96;\\n  padding: 15px;\\n  border-radius: 10px;\\n  margin-bottom: 15px;\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var Button=styled.button(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  background: #7b62c4;\\n  color: white;\\n  padding: 10px;\\n  border: none;\\n  margin-bottom: 10px;\\n  cursor: pointer;\\n  border-radius: 10px;\\n\"])));var Span=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  color: white;\\n\"])));export default Login;","map":{"version":3,"sources":["C:/Users/hillj/Desktop/dev/react/chaty/client/src/pages/Login.js"],"names":["React","useState","styled","Link","Logo","ToastContainer","toast","axiosInstance","loginRoute","useDispatch","useSelector","addUser","removeUser","useNavigate","Login","username","setUsername","password","setPassword","user","state","value","dispatch","navigate","console","log","toastOptions","position","autoClose","pauseOnHover","draggable","theme","handleSubmit","e","preventDefault","handleValidation","post","data","error","length","target","color","textDecoration","Container","div","Form","form","Top","Image","img","Name","h2","InputContainer","Input","input","Button","button","Span","span"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Logo from \"../assets/chaty-logos_white.png\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { axiosInstance } from \"../util/axios/axiosInstance\";\r\nimport { loginRoute } from \"../util/axios/routes\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addUser, removeUser } from \"../redux/userSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  // Defining vairables\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const user = useSelector((state) => state.user.value);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  console.log(user);\r\n\r\n  // configuring Toast options for modal\r\n\r\n  const toastOptions = {\r\n    position: \"top-center\",\r\n    autoClose: \"800ms\",\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    theme: \"dark\",\r\n  };\r\n\r\n  // If user is already logged in and saved into local stoarge code will send them to chat room.\r\n\r\n  // useEffect(() => {\r\n  //   if (user.username) {\r\n  //     navigate(\"/\");\r\n  //   }\r\n  // }, []);\r\n\r\n  // Makes request to api and saves recived user object to redux\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (handleValidation) {\r\n      try {\r\n        const { data } = await axiosInstance.post(loginRoute, {\r\n          username,\r\n          password,\r\n        });\r\n        dispatch(removeUser());\r\n        dispatch(addUser(data));\r\n\r\n        navigate(\"/chat\");\r\n      } catch (err) {\r\n        toast.error(\"Opps? somthing went wrong\", toastOptions);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Code validates user form input\r\n\r\n  const handleValidation = () => {\r\n    if (username.length < 3 || password.length < 3) {\r\n      toast.error(\"Email and password required\", toastOptions);\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Form onSubmit={(e) => handleSubmit(e)}>\r\n          <Top>\r\n            <Image src={Logo} />\r\n            <Name>Chatty</Name>\r\n          </Top>\r\n          <InputContainer>\r\n            <Input\r\n              type={\"text\"}\r\n              name=\"username\"\r\n              placeholder=\"username\"\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n\r\n            <Input\r\n              type={\"password\"}\r\n              name=\"password\"\r\n              placeholder=\" password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n\r\n            <Button type=\"submit\">Login</Button>\r\n\r\n            <Span>\r\n              I don't have an account yet{\" \"}\r\n              <Link\r\n                style={{ color: \"blue\", textDecoration: \"none\" }}\r\n                to=\"/register\"\r\n              >\r\n                Register\r\n              </Link>\r\n            </Span>\r\n          </InputContainer>\r\n        </Form>\r\n      </Container>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  max-width: 100vw;\r\n  height: 100vh;\r\n  background: #131224;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Form = styled.form`\r\n  width: 30%;\r\n  display: flex;\r\n  height: 500px;\r\n  flex-direction: column;\r\n  border-radius: 10px;\r\n  background: #0b0914;\r\n`;\r\n\r\nconst Top = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 100px;\r\n  height: 100px;\r\n`;\r\n\r\nconst Name = styled.h2`\r\n  color: white;\r\n  font-size: 30px;\r\n`;\r\n\r\nconst InputContainer = styled.div`\r\n  max-width: 100%;\r\n  flex: 3;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px 40px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  border: 2px solid #3e1c96;\r\n  padding: 15px;\r\n  border-radius: 10px;\r\n  margin-bottom: 15px;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: #7b62c4;\r\n  color: white;\r\n  padding: 10px;\r\n  border: none;\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst Span = styled.span`\r\n  color: white;\r\n`;\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}