{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _asyncToGenerator from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/hillj/Desktop/dev/react/chaty/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9;import _regeneratorRuntime from\"C:\\\\Users\\\\hillj\\\\Desktop\\\\dev\\\\react\\\\chaty\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import styled from\"styled-components\";import{Link,useNavigate}from\"react-router-dom\";import Logo from\"../assets/chaty-logos_white.png\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{axiosInstance}from\"../util/axios/axiosInstance\";import{registerRoute}from\"../util/axios/routes\";import{useDispatch}from\"react-redux\";import{addUser,removeUser}from\"../redux/userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Register=function Register(){// Defining vairables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var dispatch=useDispatch();var navigate=useNavigate();// configuring Toast options for modal\nvar toastOptions={position:\"top-center\",autoClose:\"800ms\",pauseOnHover:true,draggable:true,theme:\"dark\"};// If user is already logged in and saved into local stoarge code will send them to chat room.\n// useEffect(() => {\n//   if (user.user.username) {\n//     navigate(\"/\");\n//   }\n// }, []);\n// Makes request to api and saves recived user object to redux\nvar handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _yield$axiosInstance$,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!handleValidation){_context.next=15;break;}_context.prev=2;_context.next=5;return axiosInstance.post(registerRoute,{username:username,password:password,email:email});case 5:_yield$axiosInstance$=_context.sent;data=_yield$axiosInstance$.data;dispatch(removeUser());dispatch(addUser(data));navigate(\"/setAvatar\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);toast.error(\"Opps? somthing went wrong\",toastOptions);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// Code validates user form input\nvar handleValidation=function handleValidation(){if(password!==confirmPassword){toast.error(\"password and confirm password should match.\",toastOptions);return false;}else if(username.length<3){toast.error(\"username must be longer than 3 chafacters\",toastOptions);return false;}else if(email.length<5){toast.error(\"email must be longer than 5 characters\",toastOptions);return false;}else if(password.length<6){toast.error(\"password must be longer than 3 chafacters\",toastOptions);return false;}else if(email===\"\"){toast.error(\"Cant leave field empty\",toastOptions);return false;}else{return true;}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(Image,{src:Logo}),/*#__PURE__*/_jsx(Name,{children:\"Chatty\"})]}),/*#__PURE__*/_jsxs(InputContainer,{children:[/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"username\",placeholder:\"username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"email\",name:\"email\",placeholder:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"password\",placeholder:\" password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Input,{type:\"password\",name:\"confirmPassword\",placeholder:\"confirm password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Create\"}),/*#__PURE__*/_jsxs(Span,{children:[\"I already have an account\",\" \",/*#__PURE__*/_jsx(Link,{style:{color:\"blue\",textDecoration:\"none\"},to:\"/\",children:\"Login\"})]})]})]})}),/*#__PURE__*/_jsx(ToastContainer,{})]});};var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 100vw;\\n  height: 100vh;\\n  background: #131224;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));var Form=styled.form(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 30%;\\n  display: flex;\\n  height: 500px;\\n  flex-direction: column;\\n  border-radius: 10px;\\n  background: #0b0914;\\n\"])));var Top=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])));var Image=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 100px;\\n  height: 100px;\\n\"])));var Name=styled.h2(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  color: white;\\n  font-size: 30px;\\n\"])));var InputContainer=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  max-width: 100%;\\n  flex: 3;\\n  display: flex;\\n  flex-direction: column;\\n  padding: 20px 40px;\\n\"])));var Input=styled.input(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  border: 2px solid #3e1c96;\\n  padding: 15px;\\n  border-radius: 10px;\\n  margin-bottom: 15px;\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var Button=styled.button(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  background: #7b62c4;\\n  color: white;\\n  padding: 10px;\\n  border: none;\\n  margin-bottom: 10px;\\n  cursor: pointer;\\n  border-radius: 10px;\\n\"])));var Span=styled.span(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  color: white;\\n\"])));export default Register;","map":{"version":3,"sources":["C:/Users/hillj/Desktop/dev/react/chaty/client/src/pages/Register.js"],"names":["React","useState","styled","Link","useNavigate","Logo","ToastContainer","toast","axiosInstance","registerRoute","useDispatch","addUser","removeUser","Register","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","dispatch","navigate","toastOptions","position","autoClose","pauseOnHover","draggable","theme","handleSubmit","e","preventDefault","handleValidation","post","data","error","length","target","value","color","textDecoration","Container","div","Form","form","Top","Image","img","Name","h2","InputContainer","Input","input","Button","button","Span","span"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Logo from \"../assets/chaty-logos_white.png\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { axiosInstance } from \"../util/axios/axiosInstance\";\r\nimport { registerRoute } from \"../util/axios/routes\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addUser, removeUser } from \"../redux/userSlice\";\r\n\r\nconst Register = () => {\r\n  // Defining vairables\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  // configuring Toast options for modal\r\n\r\n  const toastOptions = {\r\n    position: \"top-center\",\r\n    autoClose: \"800ms\",\r\n    pauseOnHover: true,\r\n    draggable: true,\r\n    theme: \"dark\",\r\n  };\r\n\r\n  // If user is already logged in and saved into local stoarge code will send them to chat room.\r\n\r\n  // useEffect(() => {\r\n  //   if (user.user.username) {\r\n  //     navigate(\"/\");\r\n  //   }\r\n  // }, []);\r\n\r\n  // Makes request to api and saves recived user object to redux\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (handleValidation) {\r\n      try {\r\n        const { data } = await axiosInstance.post(registerRoute, {\r\n          username,\r\n          password,\r\n          email,\r\n        });\r\n        dispatch(removeUser());\r\n        dispatch(addUser(data));\r\n        navigate(\"/setAvatar\");\r\n      } catch (err) {\r\n        toast.error(\"Opps? somthing went wrong\", toastOptions);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Code validates user form input\r\n\r\n  const handleValidation = () => {\r\n    if (password !== confirmPassword) {\r\n      toast.error(\"password and confirm password should match.\", toastOptions);\r\n      return false;\r\n    } else if (username.length < 3) {\r\n      toast.error(\"username must be longer than 3 chafacters\", toastOptions);\r\n      return false;\r\n    } else if (email.length < 5) {\r\n      toast.error(\"email must be longer than 5 characters\", toastOptions);\r\n      return false;\r\n    } else if (password.length < 6) {\r\n      toast.error(\"password must be longer than 3 chafacters\", toastOptions);\r\n      return false;\r\n    } else if (email === \"\") {\r\n      toast.error(\"Cant leave field empty\", toastOptions);\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Form onSubmit={(e) => handleSubmit(e)}>\r\n          <Top>\r\n            <Image src={Logo} />\r\n            <Name>Chatty</Name>\r\n          </Top>\r\n          <InputContainer>\r\n            <Input\r\n              type={\"text\"}\r\n              name=\"username\"\r\n              placeholder=\"username\"\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n\r\n            <Input\r\n              type={\"email\"}\r\n              name=\"email\"\r\n              placeholder=\"email\"\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n\r\n            <Input\r\n              type={\"password\"}\r\n              name=\"password\"\r\n              placeholder=\" password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n\r\n            <Input\r\n              type={\"password\"}\r\n              name=\"confirmPassword\"\r\n              placeholder=\"confirm password\"\r\n              onChange={(e) => setConfirmPassword(e.target.value)}\r\n            />\r\n\r\n            <Button type=\"submit\">Create</Button>\r\n\r\n            <Span>\r\n              I already have an account{\" \"}\r\n              <Link style={{ color: \"blue\", textDecoration: \"none\" }} to=\"/\">\r\n                Login\r\n              </Link>\r\n            </Span>\r\n          </InputContainer>\r\n        </Form>\r\n      </Container>\r\n      <ToastContainer />\r\n    </>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  max-width: 100vw;\r\n  height: 100vh;\r\n  background: #131224;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Form = styled.form`\r\n  width: 30%;\r\n  display: flex;\r\n  height: 500px;\r\n  flex-direction: column;\r\n  border-radius: 10px;\r\n  background: #0b0914;\r\n`;\r\n\r\nconst Top = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  width: 100px;\r\n  height: 100px;\r\n`;\r\n\r\nconst Name = styled.h2`\r\n  color: white;\r\n  font-size: 30px;\r\n`;\r\n\r\nconst InputContainer = styled.div`\r\n  max-width: 100%;\r\n  flex: 3;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px 40px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  border: 2px solid #3e1c96;\r\n  padding: 15px;\r\n  border-radius: 10px;\r\n  margin-bottom: 15px;\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  background: #7b62c4;\r\n  color: white;\r\n  padding: 10px;\r\n  border: none;\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n  border-radius: 10px;\r\n`;\r\n\r\nconst Span = styled.span`\r\n  color: white;\r\n`;\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}